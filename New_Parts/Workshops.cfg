//
// First, we'll add Ground Construction support to the EL workshop.
//
@PART[KKAOSS_Workshop]:NEEDS[GroundConstruction]
{
    MODULE
	{
		name = GroundWorkshop
		Efficiency = 3
	}
}


// The two workshops - based on the EL-workshops.

// This is for the 'stage 1' resources: Polymers, MaterialKits
+PART[KKAOSS_Workshop]:NEEDS[KolonyTools]
{
    @name = KKAOSS_MKSAddon_Industry_hab_A
    @title = K&K Automated Production Management Station

    !MODULE[ExConverter] {}
    !RESOURCE[RocketParts] {}

    @MODULE[GroundWorkshop]
    {
        @Efficiency = 2
    }

    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 1
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 2
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
	MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 3
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}

}

// This is for the 'stage 2' resources: SpecializedParts, Machinery, ColonySupplies
+PART[KKAOSS_Workshop]:NEEDS[KolonyTools]
{
    @name = KKAOSS_MKSAddon_Industry_hab_B
    @title = K&K Parts Production Station

    !MODULE[ExConverter] {}
    !RESOURCE[RocketParts] {}

    @MODULE[GroundWorkshop]
    {
        @Efficiency = 2
    }

    MODULE
	{
		name = MKSModule
		eTag = Stage_Two
		eMultiplier = #$/mass$
	}

    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 1
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 2
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
	MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 3
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}


}

//
// The two 'automated facilities' - based on the EL-smelters.
//

// This is for the 'stage 1' resources: Polymers, MaterialKits
+PART[KKAOSS_Smelter]:NEEDS[KolonyTools]
{
    @name = KKAOSS_MKSAddon_Industry_auto_A
    @title = K&K Automated Production Facility

    !MODULE[ExConverter] {}
    !MODULE[ExConverter] {}
    !RESOURCE[Metal] {}
    !RESOURCE[MetalOre] {}
    !RESOURCE[ScrapMetal] {}

    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 1
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 2
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
	MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 3
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}

	MODULE
	{
		name = MKSModule
		eTag = Stage_One
		eMultiplier = #$/mass$
	}

	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = MaterialKits
		StartActionName = Start MaterialKits
		StopActionName = Stop MaterialKits

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		ExperienceEffect = ConverterSkill
		Efficiency = 1

		INPUT_RESOURCE
		{
			ResourceName = Metals
			Ratio =  0.00330000
		}
		INPUT_RESOURCE
		{
			ResourceName = Chemicals
			Ratio =  0.00165000
		}
		INPUT_RESOURCE
		{
			ResourceName = Polymers
			Ratio =  0.00330000
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 16.5
		}
		OUTPUT_RESOURCE
		{
			ResourceName = MaterialKits
			Ratio = 0.00825000
			DumpExcess = False
		}
		INPUT_RESOURCE
		{
			ResourceName = Machinery
			Ratio = 0.0000400
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Recyclables
			Ratio = 0.0000400
			DumpExcess = true
		}
		REQUIRED_RESOURCE
		{
			ResourceName = Machinery
			Ratio = 2000
		}
	}

	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Polymers
		StartActionName = Start Polymers
		StopActionName = Stop Polymers

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		ExperienceEffect = ConverterSkill
		Efficiency = 1

		INPUT_RESOURCE
		{
			ResourceName = Substrate
			Ratio =  0.0018
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.872
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Polymers
			Ratio = 0.00036
			DumpExcess = False
		}
		INPUT_RESOURCE
		{
			ResourceName = Machinery
			Ratio = 0.0000006
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Recyclables
			Ratio = 0.0000006
			DumpExcess = true
		}
		REQUIRED_RESOURCE
		{
			ResourceName = Machinery
			Ratio = 30
		}
	}
}

// This is for the 'stage 2' resources: SpecializedParts, Machinery, ColonySupplies
+PART[KKAOSS_Smelter]:NEEDS[KolonyTools]
{
    @name = KKAOSS_MKSAddon_Industry_auto_B
    @title = K&K Parts Production Aid

    !MODULE[ExConverter] {}
    !MODULE[ExConverter] {}
    !RESOURCE[Metal] {}
    !RESOURCE[MetalOre] {}
    !RESOURCE[ScrapMetal] {}

    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 1
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
    MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 2
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}
	MODULE
	{
		name = ModuleSwappableConverter
		bayName = Bay 3
		typeName = Bay
		ResourceCosts = SpecializedParts,5,MaterialKits,1,ElectricCharge,3
	}

}
